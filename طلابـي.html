<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุธุงู ูุชุงุจุนุฉ ุงูุทูุงุจ</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <style>
        * {
            font-family: 'Tajawal', sans-serif;
        }
        
        .theme-purple {
            --primary-color: #8B5CF6;
            --secondary-color: #7C3AED;
        }
        
        .theme-green {
            --primary-color: #10B981;
            --secondary-color: #059669;
        }
        
        .theme-blue {
            --primary-color: #3B82F6;
            --secondary-color: #2563EB;
        }
        
        .theme-orange {
            --primary-color: #F59E0B;
            --secondary-color: #D97706;
        }
        
        .dark-mode {
            background-color: #1f2937 !important;
            color: #f9fafb !important;
        }
        
        .dark-mode .bg-white {
            background-color: #374151 !important;
            color: #f9fafb !important;
        }
        
        .dark-mode .text-gray-800 {
            color: #f9fafb !important;
        }
        
        .dark-mode .text-gray-600 {
            color: #d1d5db !important;
        }
        
        .dark-mode .border-gray-200 {
            border-color: #4b5563 !important;
        }
        
        .dark-mode .bg-gray-50 {
            background-color: #374151 !important;
        }
        
        .student-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .counter-btn {
            transition: all 0.2s ease;
        }
        
        .counter-btn:hover {
            transform: scale(1.1);
        }
        
        .active-tab {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)) !important;
            color: white !important;
        }
        
        .performance-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .performance-excellent { background: linear-gradient(135deg, #10B981, #059669); color: white; }
        .performance-good { background: linear-gradient(135deg, #3B82F6, #2563EB); color: white; }
        .performance-average { background: linear-gradient(135deg, #F59E0B, #D97706); color: white; }
        .performance-weak { background: linear-gradient(135deg, #EF4444, #DC2626); color: white; }
    </style>
</head>
<body class="theme-purple bg-gray-50 min-h-screen" dir="rtl">
    
    <!-- ุดุงุดุฉ ุชุณุฌูู ุงูุฏุฎูู -->
    <div id="loginScreen" class="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-400 to-purple-600 p-4">
        <div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md">
            <div class="text-center mb-8">
                <div class="w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center">
                    <i class="fas fa-graduation-cap text-3xl text-white"></i>
                </div>
                <h1 class="text-2xl font-bold text-gray-800">ูุธุงู ูุชุงุจุนุฉ ุงูุทูุงุจ</h1>
                <p class="text-gray-600 mt-2">ุณุฌู ุงูุฏุฎูู ูุจุฏุก ุงูุงุณุชุฎุฏุงู</p>
            </div>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ุงุณู ุงููุณุชุฎุฏู</label>
                    <input type="text" id="username" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ุฃุฏุฎู ุงุณู ุงููุณุชุฎุฏู">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ูููุฉ ุงููุฑูุฑ</label>
                    <input type="password" id="password" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ">
                </div>
                
                <button onclick="login()" class="w-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white py-3 rounded-lg font-semibold transition-all duration-300">
                    <i class="fas fa-sign-in-alt ml-2"></i>
                    ุชุณุฌูู ุงูุฏุฎูู
                </button>
                
                <div class="text-center">
                    <p class="text-gray-600 text-sm">ููุณ ูุฏูู ุญุณุงุจุ</p>
                    <button onclick="showRegister()" class="text-blue-500 hover:text-blue-700 font-semibold text-sm mt-1">
                        ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ุดุงุดุฉ ุงูุชุณุฌูู -->
    <div id="registerScreen" class="min-h-screen flex items-center justify-center bg-gradient-to-br from-green-400 to-blue-500 p-4 hidden">
        <div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md">
            <div class="text-center mb-8">
                <div class="w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-green-500 to-blue-600 rounded-2xl flex items-center justify-center">
                    <i class="fas fa-user-plus text-3xl text-white"></i>
                </div>
                <h1 class="text-2xl font-bold text-gray-800">ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ</h1>
                <p class="text-gray-600 mt-2">ุงูุดุฆ ุญุณุงุจู ูุจุฏุก ุงูุงุณุชุฎุฏุงู</p>
            </div>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ุงุณู ุงููุณุชุฎุฏู</label>
                    <input type="text" id="newUsername" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" placeholder="ุงุฎุชุฑ ุงุณู ูุณุชุฎุฏู">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ูููุฉ ุงููุฑูุฑ</label>
                    <input type="password" id="newPassword" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" placeholder="ุงุฎุชุฑ ูููุฉ ูุฑูุฑ">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ</label>
                    <input type="password" id="confirmPassword" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" placeholder="ุฃุนุฏ ุฅุฏุฎุงู ูููุฉ ุงููุฑูุฑ">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ุงุณู ุงููุนูู</label>
                    <input type="text" id="teacherName" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" placeholder="ุฃุฏุฎู ุงุณูู ุงููุงูู">
                </div>
                
                <button onclick="register()" class="w-full bg-gradient-to-r from-green-500 to-blue-600 hover:from-green-600 hover:to-blue-700 text-white py-3 rounded-lg font-semibold transition-all duration-300">
                    <i class="fas fa-user-plus ml-2"></i>
                    ุฅูุดุงุก ุงูุญุณุงุจ
                </button>
                
                <div class="text-center">
                    <button onclick="showLogin()" class="text-blue-500 hover:text-blue-700 font-semibold text-sm">
                        โ ุงูุนูุฏุฉ ูุชุณุฌูู ุงูุฏุฎูู
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ุงูุชุทุจูู ุงูุฑุฆูุณู -->
    <div id="app" class="hidden">
        <!-- ุงูููุฏุฑ -->
        <header class="bg-gradient-to-l from-[var(--primary-color)] to-[var(--secondary-color)] text-white shadow-lg">
            <div class="container mx-auto px-4 py-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4 space-x-reverse">
                        <div class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center">
                            <i class="fas fa-graduation-cap text-xl"></i>
                        </div>
                        <div>
                            <h1 class="text-xl font-bold">ูุธุงู ูุชุงุจุนุฉ ุฃุฏุงุก ุงูุทูุงุจ</h1>
                            <p class="text-white/80 text-sm">ูุฑุญุจุงูุ <span id="teacherNameHeader"></span></p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-3 space-x-reverse">
                        <button onclick="toggleDarkMode()" class="p-2 rounded-lg bg-white/10 hover:bg-white/20 transition">
                            <i class="fas fa-moon text-yellow-300"></i>
                        </button>
                        <div class="text-sm bg-white/20 px-3 py-1 rounded-lg">
                            <i class="fas fa-calendar-alt ml-1"></i>
                            <span id="currentDate"></span>
                        </div>
                        <button onclick="logout()" class="bg-white/10 hover:bg-white/20 px-3 py-1 rounded-lg text-sm transition">
                            <i class="fas fa-sign-out-alt ml-1"></i>
                            ุฎุฑูุฌ
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- ุดุฑูุท ุงูุชุจููุจุงุช -->
        <div class="bg-white shadow-lg mx-4 mt-4 rounded-xl">
            <div class="flex overflow-x-auto">
                <button onclick="showTab('groups')" class="tab-btn active-tab flex items-center space-x-2 space-x-reverse px-4 py-3 text-sm font-semibold whitespace-nowrap">
                    <i class="fas fa-users"></i>
                    <span>ุงููุฌููุนุงุช</span>
                </button>
                <button onclick="showTab('tracking')" class="tab-btn flex items-center space-x-2 space-x-reverse px-4 py-3 text-sm font-semibold whitespace-nowrap text-gray-600 hover:text-[var(--primary-color)]">
                    <i class="fas fa-tasks"></i>
                    <span>ุงููุชุงุจุนุฉ</span>
                </button>
                <button onclick="showTab('statistics')" class="tab-btn flex items-center space-x-2 space-x-reverse px-4 py-3 text-sm font-semibold whitespace-nowrap text-gray-600 hover:text-[var(--primary-color)]">
                    <i class="fas fa-chart-bar"></i>
                    <span>ุงูุฅุญุตุงุฆูุงุช</span>
                </button>
                <button onclick="showTab('hall')" class="tab-btn flex items-center space-x-2 space-x-reverse px-4 py-3 text-sm font-semibold whitespace-nowrap text-gray-600 hover:text-[var(--primary-color)]">
                    <i class="fas fa-trophy"></i>
                    <span>ูุงุนุฉ ุงูุดุฑู</span>
                </button>
                <button onclick="showTab('settings')" class="tab-btn flex items-center space-x-2 space-x-reverse px-4 py-3 text-sm font-semibold whitespace-nowrap text-gray-600 hover:text-[var(--primary-color)]">
                    <i class="fas fa-cogs"></i>
                    <span>ุงูุฅุนุฏุงุฏุงุช</span>
                </button>
            </div>
        </div>

        <!-- ูุญุชูู ุงูุชุจููุจุงุช -->
        <main class="container mx-auto px-4 py-6">
            
            <!-- ุชุจููุจ ุงููุฌููุนุงุช -->
            <div id="groups-tab" class="tab-content">
                <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6">
                        <h2 class="text-xl font-bold text-gray-800">
                            <i class="fas fa-users ml-2 text-[var(--primary-color)]"></i>
                            ุฅุฏุงุฑุฉ ุงููุฌููุนุงุช ูุงูุทูุงุจ
                        </h2>
                        <div class="flex flex-wrap gap-2">
                            <button onclick="showAddGroupModal()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 space-x-reverse text-sm">
                                <i class="fas fa-layer-group"></i>
                                <span>ุฅุถุงูุฉ ูุฌููุนุฉ</span>
                            </button>
                            <button onclick="showAddStudentModal()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 space-x-reverse text-sm">
                                <i class="fas fa-user-plus"></i>
                                <span>ุฅุถุงูุฉ ุทุงูุจ</span>
                            </button>
                        </div>
                    </div>

                    <!-- ูุงุฆูุฉ ุงููุฌููุนุงุช -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="groupsList">
                        <!-- ุณูุชู ููุก ุงููุฌููุนุงุช ููุง -->
                    </div>
                </div>
            </div>

            <!-- ุชุจููุจ ุงููุชุงุจุนุฉ -->
            <div id="tracking-tab" class="tab-content hidden">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6">
                        <h2 class="text-xl font-bold text-gray-800">
                            <i class="fas fa-tasks ml-2 text-green-500"></i>
                            ุงููุชุงุจุนุฉ ุงูููููุฉ
                        </h2>
                        <div class="flex flex-wrap gap-2">
                            <button onclick="exportToExcel()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 space-x-reverse text-sm">
                                <i class="fas fa-file-excel"></i>
                                <span>Excel</span>
                            </button>
                            <button onclick="exportToPDF()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 space-x-reverse text-sm">
                                <i class="fas fa-file-pdf"></i>
                                <span>PDF</span>
                            </button>
                        </div>
                    </div>

                    <!-- ููุชุฑุฉ ุงููุฌููุนุงุช -->
                    <div class="bg-gray-50 p-4 rounded-lg mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">ุงุฎุชุฑ ุงููุฌููุนุฉ ูููุชุงุจุนุฉ:</label>
                        <select id="trackingGroupFilter" onchange="renderTrackingTable()" class="w-full p-2 border border-gray-300 rounded-lg text-sm">
                            <option value="all">ุฌููุน ุงููุฌููุนุงุช</option>
                        </select>
                    </div>

                    <!-- ุฌุฏูู ุงููุชุงุจุนุฉ -->
                    <div class="overflow-x-auto">
                        <table class="w-full min-w-4xl">
                            <thead>
                                <tr class="bg-gray-50 border-b">
                                    <th class="p-3 text-right font-semibold text-gray-700 text-sm">ุงูุทุงูุจ</th>
                                    <th class="p-3 text-center font-semibold text-gray-700 text-sm">ุงููุงุฌุจุงุช</th>
                                    <th class="p-3 text-center font-semibold text-gray-700 text-sm">ุงููุดุงุฑูุฉ</th>
                                    <th class="p-3 text-center font-semibold text-gray-700 text-sm">ุงููุดุงุท</th>
                                    <th class="p-3 text-center font-semibold text-gray-700 text-sm">ุงูููุงุท</th>
                                    <th class="p-3 text-center font-semibold text-gray-700 text-sm">ุงูุชูููู</th>
                                </tr>
                            </thead>
                            <tbody id="trackingTable">
                                <!-- ุณูุชู ููุก ุงูุฌุฏูู ููุง -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- ุชุจููุจ ุงูุฅุญุตุงุฆูุงุช -->
            <div id="statistics-tab" class="tab-content hidden">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-6">
                        <i class="fas fa-chart-bar ml-2 text-blue-500"></i>
                        ุงูุฅุญุตุงุฆูุงุช ูุงูุชูุงุฑูุฑ
                    </h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                        <div class="bg-gradient-to-br from-blue-500 to-blue-600 text-white p-4 rounded-xl shadow-lg">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-blue-100 text-sm">ุฅุฌูุงูู ุงูุทูุงุจ</p>
                                    <p class="text-2xl font-bold mt-1" id="totalStudents">0</p>
                                </div>
                                <i class="fas fa-users text-xl text-blue-200"></i>
                            </div>
                        </div>
                        
                        <div class="bg-gradient-to-br from-green-500 to-green-600 text-white p-4 rounded-xl shadow-lg">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-green-100 text-sm">ุฅุฌูุงูู ุงููุฌููุนุงุช</p>
                                    <p class="text-2xl font-bold mt-1" id="totalGroups">0</p>
                                </div>
                                <i class="fas fa-layer-group text-xl text-green-200"></i>
                            </div>
                        </div>
                        
                        <div class="bg-gradient-to-br from-purple-500 to-purple-600 text-white p-4 rounded-xl shadow-lg">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-purple-100 text-sm">ุฃุนูู ููุงุท</p>
                                    <p class="text-2xl font-bold mt-1" id="highestPoints">0</p>
                                </div>
                                <i class="fas fa-star text-xl text-purple-200"></i>
                            </div>
                        </div>
                        
                        <div class="bg-gradient-to-br from-orange-500 to-orange-600 text-white p-4 rounded-xl shadow-lg">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-orange-100 text-sm">ูุชูุณุท ุงูููุงุท</p>
                                    <p class="text-2xl font-bold mt-1" id="averagePoints">0</p>
                                </div>
                                <i class="fas fa-chart-line text-xl text-orange-200"></i>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gray-50 rounded-xl p-6 text-center">
                        <i class="fas fa-chart-pie text-4xl text-gray-400 mb-4"></i>
                        <p class="text-gray-500">ุณูุชู ุนุฑุถ ุงููุฎุทุทุงุช ุงูุฅุญุตุงุฆูุฉ ููุง</p>
                    </div>
                </div>
            </div>

            <!-- ุชุจููุจ ูุงุนุฉ ุงูุดุฑู -->
            <div id="hall-tab" class="tab-content hidden">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-6">
                        <i class="fas fa-trophy ml-2 text-yellow-500"></i>
                        ูุงุนุฉ ุงูุดุฑู
                    </h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                        <!-- ุงููุฑูุฒ ุงูุฃูู -->
                        <div class="bg-gradient-to-br from-yellow-400 to-yellow-600 text-white rounded-xl p-6 text-center shadow-lg">
                            <div class="w-16 h-16 mx-auto mb-3 bg-white/20 rounded-full flex items-center justify-center text-2xl">
                                ๐ฅ
                            </div>
                            <h3 class="text-lg font-bold mb-1" id="firstPlace">-</h3>
                            <p class="text-yellow-100 text-sm" id="firstPoints">0 ููุทุฉ</p>
                            <div class="mt-2 text-yellow-200 text-xs" id="firstGroup">-</div>
                        </div>

                        <!-- ุงููุฑูุฒ ุงูุซุงูู -->
                        <div class="bg-gradient-to-br from-gray-400 to-gray-600 text-white rounded-xl p-6 text-center shadow-lg">
                            <div class="w-16 h-16 mx-auto mb-3 bg-white/20 rounded-full flex items-center justify-center text-2xl">
                                ๐ฅ
                            </div>
                            <h3 class="text-lg font-bold mb-1" id="secondPlace">-</h3>
                            <p class="text-gray-100 text-sm" id="secondPoints">0 ููุทุฉ</p>
                            <div class="mt-2 text-gray-200 text-xs" id="secondGroup">-</div>
                        </div>

                        <!-- ุงููุฑูุฒ ุงูุซุงูุซ -->
                        <div class="bg-gradient-to-br from-orange-400 to-orange-700 text-white rounded-xl p-6 text-center shadow-lg">
                            <div class="w-16 h-16 mx-auto mb-3 bg-white/20 rounded-full flex items-center justify-center text-2xl">
                                ๐ฅ
                            </div>
                            <h3 class="text-lg font-bold mb-1" id="thirdPlace">-</h3>
                            <p class="text-orange-100 text-sm" id="thirdPoints">0 ููุทุฉ</p>
                            <div class="mt-2 text-orange-200 text-xs" id="thirdGroup">-</div>
                        </div>
                    </div>

                    <!-- ุฌุฏูู ุงูุชุตููู -->
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="bg-gray-50 border-b">
                                    <th class="p-3 text-right font-semibold text-gray-700 text-sm">ุงูุชุฑุชูุจ</th>
                                    <th class="p-3 text-right font-semibold text-gray-700 text-sm">ุงูุทุงูุจ</th>
                                    <th class="p-3 text-right font-semibold text-gray-700 text-sm">ุงููุฌููุนุฉ</th>
                                    <th class="p-3 text-center font-semibold text-gray-700 text-sm">ุงูููุงุท</th>
                                    <th class="p-3 text-center font-semibold text-gray-700 text-sm">โ ุงูุตุญ</th>
                                    <th class="p-3 text-center font-semibold text-gray-700 text-sm">โ ุงูุฎุทุฃ</th>
                                    <th class="p-3 text-center font-semibold text-gray-700 text-sm">ุงูุฏูุฉ</th>
                                </tr>
                            </thead>
                            <tbody id="rankingTable">
                                <!-- ุณูุชู ููุก ุงูุฌุฏูู ููุง -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- ุชุจููุจ ุงูุฅุนุฏุงุฏุงุช -->
            <div id="settings-tab" class="tab-content hidden">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-6">
                        <i class="fas fa-cogs ml-2 text-gray-500"></i>
                        ุงูุฅุนุฏุงุฏุงุช
                    </h2>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- ุฅุนุฏุงุฏุงุช ุงููุธูุฑ -->
                        <div class="bg-gray-50 p-4 rounded-xl border">
                            <h3 class="text-lg font-semibold mb-4 text-gray-800">
                                <i class="fas fa-palette ml-2"></i>
                                ุฅุนุฏุงุฏุงุช ุงููุธูุฑ
                            </h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ุงุฎุชูุงุฑ ุงูุซูู</label>
                                    <div class="grid grid-cols-2 gap-2">
                                        <button onclick="changeTheme('purple')" class="bg-purple-500 hover:bg-purple-600 text-white p-2 rounded-lg text-xs font-semibold">
                                            ุงูุจููุณุฌู
                                        </button>
                                        <button onclick="changeTheme('green')" class="bg-green-500 hover:bg-green-600 text-white p-2 rounded-lg text-xs font-semibold">
                                            ุงูุฃุฎุถุฑ
                                        </button>
                                        <button onclick="changeTheme('blue')" class="bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-lg text-xs font-semibold">
                                            ุงูุฃุฒุฑู
                                        </button>
                                        <button onclick="changeTheme('orange')" class="bg-orange-500 hover:bg-orange-600 text-white p-2 rounded-lg text-xs font-semibold">
                                            ุงูุจุฑุชูุงูู
                                        </button>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-2 bg-white rounded-lg">
                                    <span class="text-gray-700 font-medium text-sm">ุงููุถุน ุงููููู</span>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="darkModeToggle" class="sr-only peer" onchange="toggleDarkMode()">
                                        <div class="w-10 h-5 bg-gray-200 peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"></div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- ุฅุนุฏุงุฏุงุช ุงูุฃูุฒุงู -->
                        <div class="bg-gray-50 p-4 rounded-xl border">
                            <h3 class="text-lg font-semibold mb-4 text-gray-800">
                                <i class="fas fa-weight-scale ml-2"></i>
                                ุฃูุฒุงู ุงูุชูููู
                            </h3>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">ููุงุท ุงููุงุฌุจุงุช (ููู โ)</label>
                                    <input type="number" id="homeworkWeight" value="1" min="1" max="10" class="w-full p-2 border border-gray-300 rounded-lg text-sm">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">ููุงุท ุงููุดุงุฑูุฉ (ููู โ)</label>
                                    <input type="number" id="participationWeight" value="1" min="1" max="10" class="w-full p-2 border border-gray-300 rounded-lg text-sm">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">ููุงุท ุงููุดุงุท (ููู โ)</label>
                                    <input type="number" id="activityWeight" value="1" min="1" max="10" class="w-full p-2 border border-gray-300 rounded-lg text-sm">
                                </div>
                                <button onclick="saveWeights()" class="w-full bg-green-500 hover:bg-green-600 text-white py-2 rounded-lg font-semibold text-sm mt-2">
                                    <i class="fas fa-save ml-1"></i>
                                    ุญูุธ ุงูุฃูุฒุงู
                                </button>
                            </div>
                        </div>

                        <!-- ุฃุฏูุงุช ุงูุจูุงูุงุช -->
                        <div class="bg-gray-50 p-4 rounded-xl border lg:col-span-2">
                            <h3 class="text-lg font-semibold mb-4 text-gray-800">
                                <i class="fas fa-database ml-2"></i>
                                ุฃุฏูุงุช ุงูุจูุงูุงุช
                            </h3>
                            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3">
                                <button onclick="importFromExcel()" class="bg-white hover:bg-gray-50 text-gray-800 py-3 rounded-lg font-semibold border border-gray-200 shadow-sm text-sm flex items-center justify-center space-x-1 space-x-reverse">
                                    <i class="fas fa-file-import text-green-500"></i>
                                    <span>ุงุณุชูุฑุงุฏ</span>
                                </button>
                                
                                <button onclick="exportToExcel()" class="bg-white hover:bg-gray-50 text-gray-800 py-3 rounded-lg font-semibold border border-gray-200 shadow-sm text-sm flex items-center justify-center space-x-1 space-x-reverse">
                                    <i class="fas fa-file-excel text-green-500"></i>
                                    <span>Excel</span>
                                </button>
                                
                                <button onclick="exportToPDF()" class="bg-white hover:bg-gray-50 text-gray-800 py-3 rounded-lg font-semibold border border-gray-200 shadow-sm text-sm flex items-center justify-center space-x-1 space-x-reverse">
                                    <i class="fas fa-file-pdf text-red-500"></i>
                                    <span>PDF</span>
                                </button>
                                
                                <button onclick="backupData()" class="bg-white hover:bg-gray-50 text-gray-800 py-3 rounded-lg font-semibold border border-gray-200 shadow-sm text-sm flex items-center justify-center space-x-1 space-x-reverse">
                                    <i class="fas fa-download text-yellow-500"></i>
                                    <span>ูุณุฎ ุงุญุชูุงุทู</span>
                                </button>
                            </div>
                            
                            <div class="mt-4 p-3 bg-red-50 border border-red-200 rounded-lg">
                                <button onclick="resetData()" class="w-full bg-red-500 hover:bg-red-600 text-white py-2 rounded-lg font-semibold text-sm flex items-center justify-center space-x-1 space-x-reverse">
                                    <i class="fas fa-trash ml-1"></i>
                                    <span>ูุณุญ ุฌููุน ุงูุจูุงูุงุช</span>
                                </button>
                                <p class="text-red-600 text-xs mt-1 text-center">โ๏ธ ุณูุชู ุญุฐู ุฌููุน ุงูุจูุงูุงุช ููุง ูููู ุงูุชุฑุงุฌุน</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- ุงูููุชุฑ -->
        <footer class="bg-gray-800 text-white py-3 mt-8">
            <div class="container mx-auto px-4 text-center">
                <p class="text-gray-400 text-xs flex items-center justify-center space-x-1 space-x-reverse">
                    <i class="fas fa-code text-blue-400"></i>
                    <span>ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ ุญุณู ุงููุญูุฏ</span>
                </p>
            </div>
        </footer>
    </div>

    <!-- ุงูููุฏุงูุงุช -->
    <!-- ููุฏุงู ุฅุถุงูุฉ ูุฌููุนุฉ -->
    <div id="addGroupModal" class="fixed inset-0 bg-black/50 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-xl p-6 w-96 mx-4 shadow-2xl">
            <h3 class="text-lg font-bold text-gray-800 mb-4 text-center">ุฅุถุงูุฉ ูุฌููุนุฉ ุฌุฏูุฏุฉ</h3>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">ุงุณู ุงููุฌููุนุฉ</label>
                    <input type="text" id="groupName" class="w-full p-3 border border-gray-300 rounded-lg text-sm" placeholder="ุฃุฏุฎู ุงุณู ุงููุฌููุนุฉ">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ููู ุงููุฌููุนุฉ</label>
                    <div class="flex justify-center space-x-2 space-x-reverse">
                        <button onclick="setGroupColor('bg-gradient-to-r from-blue-500 to-blue-600')" class="w-8 h-8 rounded-lg bg-gradient-to-r from-blue-500 to-blue-600 border border-gray-300"></button>
                        <button onclick="setGroupColor('bg-gradient-to-r from-green-500 to-green-600')" class="w-8 h-8 rounded-lg bg-gradient-to-r from-green-500 to-green-600 border border-gray-300"></button>
                        <button onclick="setGroupColor('bg-gradient-to-r from-purple-500 to-purple-600')" class="w-8 h-8 rounded-lg bg-gradient-to-r from-purple-500 to-purple-600 border border-gray-300"></button>
                        <button onclick="setGroupColor('bg-gradient-to-r from-red-500 to-red-600')" class="w-8 h-8 rounded-lg bg-gradient-to-r from-red-500 to-red-600 border border-gray-300"></button>
                    </div>
                </div>
            </div>
            <div class="flex space-x-2 space-x-reverse mt-6">
                <button onclick="hideAddGroupModal()" class="flex-1 bg-gray-500 hover:bg-gray-600 text-white py-2 rounded-lg font-semibold text-sm">ุฅูุบุงุก</button>
                <button onclick="addGroup()" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-2 rounded-lg font-semibold text-sm">ุฅุถุงูุฉ</button>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุฅุถุงูุฉ ุทุงูุจ -->
    <div id="addStudentModal" class="fixed inset-0 bg-black/50 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-xl p-6 w-96 mx-4 shadow-2xl">
            <h3 class="text-lg font-bold text-gray-800 mb-4 text-center">ุฅุถุงูุฉ ุทุงูุจ ุฌุฏูุฏ</h3>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">ุงุณู ุงูุทุงูุจ</label>
                    <input type="text" id="studentName" class="w-full p-3 border border-gray-300 rounded-lg text-sm" placeholder="ุฃุฏุฎู ุงุณู ุงูุทุงูุจ">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">ุงููุฌููุนุฉ</label>
                    <select id="studentGroup" class="w-full p-3 border border-gray-300 rounded-lg text-sm">
                        <!-- ุณูุชู ููุก ุงููุฌููุนุงุช ููุง -->
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ููู ุงูุทุงูุจ</label>
                    <div class="flex justify-center space-x-2 space-x-reverse">
                        <button onclick="setStudentColor('bg-gradient-to-r from-blue-400 to-blue-500')" class="w-8 h-8 rounded-full bg-gradient-to-r from-blue-400 to-blue-500 border border-gray-300"></button>
                        <button onclick="setStudentColor('bg-gradient-to-r from-green-400 to-green-500')" class="w-8 h-8 rounded-full bg-gradient-to-r from-green-400 to-green-500 border border-gray-300"></button>
                        <button onclick="setStudentColor('bg-gradient-to-r from-purple-400 to-purple-500')" class="w-8 h-8 rounded-full bg-gradient-to-r from-purple-400 to-purple-500 border border-gray-300"></button>
                        <button onclick="setStudentColor('bg-gradient-to-r from-pink-400 to-pink-500')" class="w-8 h-8 rounded-full bg-gradient-to-r from-pink-400 to-pink-500 border border-gray-300"></button>
                    </div>
                </div>
            </div>
            <div class="flex space-x-2 space-x-reverse mt-6">
                <button onclick="hideAddStudentModal()" class="flex-1 bg-gray-500 hover:bg-gray-600 text-white py-2 rounded-lg font-semibold text-sm">ุฅูุบุงุก</button>
                <button onclick="addStudent()" class="flex-1 bg-green-500 hover:bg-green-600 text-white py-2 rounded-lg font-semibold text-sm">ุฅุถุงูุฉ</button>
            </div>
        </div>
    </div>

    <!-- ุงูุณูุฑูุจุช ุงูุฑุฆูุณู -->
    <script>
        // ุจูุงูุงุช ุงูุชุทุจูู
        let appData = {
            users: {},
            currentUser: null,
            settings: {
                theme: 'purple',
                darkMode: false
            }
        };

        // ุจูุงูุงุช ุงููุณุชุฎุฏู ุงูุญุงูู
        let currentUserData = {
            groups: [],
            students: [],
            counters: {},
            userSettings: {
                homeworkWeight: 1,
                participationWeight: 1,
                activityWeight: 1
            }
        };

        // ุงููุชุบูุฑุงุช ุงูุนุงูุฉ
        let currentGroupColor = 'bg-gradient-to-r from-blue-500 to-blue-600';
        let currentStudentColor = 'bg-gradient-to-r from-blue-400 to-blue-500';

        // ุชููุฆุฉ ุงูุชุทุจูู
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            loadData();
            applyTheme();
            updateDate();
            checkAuthentication();
        }

        function checkAuthentication() {
            const currentUser = localStorage.getItem('currentUser');
            if (currentUser) {
                appData.currentUser = currentUser;
                loadUserData();
                showApp();
            } else {
                showLoginScreen();
            }
        }

        // ูุธุงู ุงููุณุชุฎุฏููู
        function showLoginScreen() {
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('registerScreen').classList.add('hidden');
            document.getElementById('app').classList.add('hidden');
        }

        function showRegister() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('registerScreen').classList.remove('hidden');
        }

        function showLogin() {
            document.getElementById('registerScreen').classList.add('hidden');
            document.getElementById('loginScreen').classList.remove('hidden');
        }

        function showApp() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('registerScreen').classList.add('hidden');
            document.getElementById('app').classList.remove('hidden');
            updateUserInterface();
            renderGroups();
            renderTrackingTable();
            updateStatistics();
            updateHallOfFame();
        }

        function login() {
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();
            
            if (!username || !password) {
                Swal.fire({
                    icon: 'error',
                    title: 'ุฎุทุฃ',
                    text: 'ูุฑุฌู ุฅุฏุฎุงู ุงุณู ุงููุณุชุฎุฏู ููููุฉ ุงููุฑูุฑ',
                    confirmButtonText: 'ุญุณูุงู'
                });
                return;
            }

            if (appData.users[username] && appData.users[username].password === password) {
                appData.currentUser = username;
                localStorage.setItem('currentUser', username);
                loadUserData();
                showApp();
                Swal.fire({
                    icon: 'success',
                    title: 'ูุฑุญุจุงู ุจุนูุฏุชู!',
                    text: `ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ`,
                    confirmButtonText: 'ุญุณูุงู'
                });
            } else {
                Swal.fire({
                    icon: 'error',
                    title: 'ุฎุทุฃ',
                    text: 'ุงุณู ุงููุณุชุฎุฏู ุฃู ูููุฉ ุงููุฑูุฑ ุบูุฑ ุตุญูุญุฉ',
                    confirmButtonText: 'ุญุณูุงู'
                });
            }
        }

        function register() {
            const username = document.getElementById('newUsername').value.trim();
            const password = document.getElementById('newPassword').value.trim();
            const confirmPassword = document.getElementById('confirmPassword').value.trim();
            const teacherName = document.getElementById('teacherName').value.trim();
            
            if (!username || !password || !confirmPassword || !teacherName) {
                Swal.fire({
                    icon: 'error',
                    title: 'ุฎุทุฃ',
                    text: 'ูุฑุฌู ููุก ุฌููุน ุงูุญููู',
                    confirmButtonText: 'ุญุณูุงู'
                });
                return;
            }

            if (password !== confirmPassword) {
                Swal.fire({
                    icon: 'error',
                    title: 'ุฎุทุฃ',
                    text: 'ูููุงุช ุงููุฑูุฑ ุบูุฑ ูุชุทุงุจูุฉ',
                    confirmButtonText: 'ุญุณูุงู'
                });
                return;
            }

            if (appData.users[username]) {
                Swal.fire({
                    icon: 'error',
                    title: 'ุฎุทุฃ',
                    text: 'ุงุณู ุงููุณุชุฎุฏู ููุฌูุฏ ูุณุจูุงู',
                    confirmButtonText: 'ุญุณูุงู'
                });
                return;
            }

            // ุฅูุดุงุก ูุณุชุฎุฏู ุฌุฏูุฏ
            appData.users[username] = {
                password: password,
                teacherName: teacherName,
                createdAt: new Date().toISOString(),
                data: {
                    groups: [],
                    students: [],
                    counters: {},
                    userSettings: {
                        homeworkWeight: 1,
                        participationWeight: 1,
                        activityWeight: 1
                    }
                }
            };

            appData.currentUser = username;
            localStorage.setItem('currentUser', username);
            loadUserData();
            showApp();
            
            Swal.fire({
                icon: 'success',
                title: 'ุชูุงูููุง!',
                text: `ุชู ุฅูุดุงุก ุญุณุงุจู ุจูุฌุงุญุ ${teacherName}`,
                confirmButtonText: 'ุจุฏุก ุงูุงุณุชุฎุฏุงู'
            });
        }

        function logout() {
            Swal.fire({
                title: 'ุชุณุฌูู ุงูุฎุฑูุฌ',
                text: 'ูู ุชุฑูุฏ ุชุณุฌูู ุงูุฎุฑูุฌุ',
                icon: 'question',
                showCancelButton: true,
                confirmButtonText: 'ูุนู',
                cancelButtonText: 'ูุง'
            }).then((result) => {
                if (result.isConfirmed) {
                    localStorage.removeItem('currentUser');
                    appData.currentUser = null;
                    showLoginScreen();
                }
            });
        }

        function updateUserInterface() {
            const user = appData.users[appData.currentUser];
            if (user) {
                document.getElementById('teacherNameHeader').textContent = user.teacherName;
            }
        }

        // ูุธุงู ุงูุญูุธ ุงูุชููุงุฆู
        function autoSave() {
            if (appData.currentUser) {
                appData.users[appData.currentUser].data = currentUserData;
            }
            saveData();
        }

        function loadUserData() {
            if (appData.currentUser && appData.users[appData.currentUser].data) {
                currentUserData = appData.users[appData.currentUser].data;
            }
        }

        // ุชุญููู ุงูุจูุงูุงุช
        function loadData() {
            const saved = localStorage.getItem('studentTrackerApp');
            if (saved) {
                const parsed = JSON.parse(saved);
                appData.users = parsed.users || {};
                appData.settings = parsed.settings || appData.settings;
            }
            
            // ุฅูุดุงุก ูุณุชุฎุฏู ุงูุชุฑุงุถู ููุชุฌุฑุจุฉ
            if (Object.keys(appData.users).length === 0) {
                appData.users['admin'] = {
                    password: '123456',
                    teacherName: 'ุงููุนูู ุงูุฃูู',
                    createdAt: new Date().toISOString(),
                    data: {
                        groups: [],
                        students: [],
                        counters: {},
                        userSettings: {
                            homeworkWeight: 1,
                            participationWeight: 1,
                            activityWeight: 1
                        }
                    }
                };
            }
        }

        // ุญูุธ ุงูุจูุงูุงุช
        function saveData() {
            localStorage.setItem('studentTrackerApp', JSON.stringify(appData));
        }

        // ุชุญุฏูุซ ุงูุชุงุฑูุฎ
        function updateDate() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            document.getElementById('currentDate').textContent = 
                now.toLocaleDateString('ar-SA', options);
        }

        // ุชุจุฏูู ุงูุชุจููุจุงุช
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active-tab');
                btn.classList.add('text-gray-600', 'hover:text-[var(--primary-color)]');
            });
            
            document.getElementById(tabName + '-tab').classList.remove('hidden');
            
            const activeBtn = document.querySelector(`[onclick="showTab('${tabName}')"]`);
            activeBtn.classList.add('active-tab');
            activeBtn.classList.remove('text-gray-600', 'hover:text-[var(--primary-color)]');
        }

        // ุฅุฏุงุฑุฉ ุงููุฌููุนุงุช
        function showAddGroupModal() {
            document.getElementById('addGroupModal').classList.remove('hidden');
            document.getElementById('groupName').value = '';
            currentGroupColor = 'bg-gradient-to-r from-blue-500 to-blue-600';
        }

        function hideAddGroupModal() {
            document.getElementById('addGroupModal').classList.add('hidden');
        }

        function setGroupColor(color) {
            currentGroupColor = color;
        }

        function addGroup() {
            const name = document.getElementById('groupName').value.trim();
            if (!name) {
                Swal.fire({
                    icon: 'error',
                    title: 'ุฎุทุฃ',
                    text: 'ูุฑุฌู ุฅุฏุฎุงู ุงุณู ุงููุฌููุนุฉ',
                    confirmButtonText: 'ุญุณูุงู'
                });
                return;
            }

            const group = {
                id: Date.now().toString(),
                name: name,
                color: currentGroupColor,
                createdAt: new Date().toISOString()
            };

            currentUserData.groups.push(group);
            autoSave();
            renderGroups();
            hideAddGroupModal();
            Swal.fire({
                icon: 'success',
                title: 'ูุฌุงุญ',
                text: 'ุชู ุฅุถุงูุฉ ุงููุฌููุนุฉ ุจูุฌุงุญ',
                confirmButtonText: 'ุญุณูุงู'
            });
        }

        function renderGroups() {
            const container = document.getElementById('groupsList');
            const trackingFilter = document.getElementById('trackingGroupFilter');
            
            // ุชุญุฏูุซ ููุชุฑ ุงููุชุงุจุนุฉ
            trackingFilter.innerHTML = '<option value="all">ุฌููุน ุงููุฌููุนุงุช</option>' +
                currentUserData.groups.map(group => `<option value="${group.id}">${group.name}</option>`).join('');

            container.innerHTML = '';

            if (currentUserData.groups.length === 0) {
                container.innerHTML = `
                    <div class="col-span-3 text-center py-8">
                        <i class="fas fa-layer-group text-4xl text-gray-300 mb-3"></i>
                        <p class="text-gray-500">ูุง ุชูุฌุฏ ูุฌููุนุงุช</p>
                        <button onclick="showAddGroupModal()" class="mt-3 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm">
                            ุฅุถุงูุฉ ูุฌููุนุฉ ุฃููู
                        </button>
                    </div>
                `;
                return;
            }

            currentUserData.groups.forEach(group => {
                const groupStudents = currentUserData.students.filter(s => s.groupId === group.id);
                const card = document.createElement('div');
                card.className = 'bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-300';
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-3">
                        <div class="${group.color} text-white px-3 py-1 rounded-lg text-sm font-semibold">
                            ${group.name}
                        </div>
                        <button onclick="deleteGroup('${group.id}')" class="text-red-500 hover:text-red-700 text-sm">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <div class="text-center mb-3">
                        <span class="text-2xl font-bold text-gray-800">${groupStudents.length}</span>
                        <p class="text-gray-600 text-sm">ุทุงูุจ</p>
                    </div>
                    <div class="space-y-2 max-h-32 overflow-y-auto">
                        ${groupStudents.map(student => `
                            <div class="flex items-center justify-between p-2 bg-gray-50 rounded">
                                <div class="flex items-center space-x-2 space-x-reverse">
                                    <div class="${student.color} student-avatar text-white text-sm">
                                        ${student.name.charAt(0)}
                                    </div>
                                    <span class="font-medium text-sm">${student.name}</span>
                                </div>
                                <span class="${getPerformanceBadge(student.id)} text-xs">${getPerformanceLevel(student.id)}</span>
                            </div>
                        `).join('')}
                    </div>
                `;
                container.appendChild(card);
            });

            updateStatistics();
        }

        function deleteGroup(groupId) {
            Swal.fire({
                title: 'ูู ุฃูุช ูุชุฃูุฏุ',
                text: 'ุณูุชู ุญุฐู ุฌููุน ุทูุงุจ ูุฐู ุงููุฌููุนุฉ ุฃูุถุงู!',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'ูุนูุ ุงุญุฐู',
                cancelButtonText: 'ุฅูุบุงุก',
                confirmButtonColor: '#d33'
            }).then((result) => {
                if (result.isConfirmed) {
                    currentUserData.students = currentUserData.students.filter(s => s.groupId !== groupId);
                    currentUserData.groups = currentUserData.groups.filter(g => g.id !== groupId);
                    autoSave();
                    renderGroups();
                    renderTrackingTable();
                    Swal.fire('ุชู ุงูุญุฐู', 'ุชู ุญุฐู ุงููุฌููุนุฉ ูุทูุงุจูุง', 'success');
                }
            });
        }

        // ุฅุฏุงุฑุฉ ุงูุทูุงุจ
        function showAddStudentModal() {
            document.getElementById('addStudentModal').classList.remove('hidden');
            document.getElementById('studentName').value = '';
            currentStudentColor = 'bg-gradient-to-r from-blue-400 to-blue-500';
            
            const groupSelect = document.getElementById('studentGroup');
            groupSelect.innerHTML = currentUserData.groups.map(group => 
                `<option value="${group.id}">${group.name}</option>`
            ).join('');
            
            if (currentUserData.groups.length === 0) {
                Swal.fire({
                    icon: 'warning',
                    title: 'ุชุญุฐูุฑ',
                    text: 'ูุฌุจ ุฅูุดุงุก ูุฌููุนุฉ ุฃููุงู',
                    confirmButtonText: 'ุญุณูุงู'
                });
                hideAddStudentModal();
                showAddGroupModal();
                return;
            }
        }

        function hideAddStudentModal() {
            document.getElementById('addStudentModal').classList.add('hidden');
        }

        function setStudentColor(color) {
            currentStudentColor = color;
        }

        function addStudent() {
            const name = document.getElementById('studentName').value.trim();
            const groupId = document.getElementById('studentGroup').value;
            
            if (!name) {
                Swal.fire({
                    icon: 'error',
                    title: 'ุฎุทุฃ',
                    text: 'ูุฑุฌู ุฅุฏุฎุงู ุงุณู ุงูุทุงูุจ',
                    confirmButtonText: 'ุญุณูุงู'
                });
                return;
            }

            const student = {
                id: Date.now().toString(),
                name: name,
                groupId: groupId,
                color: currentStudentColor,
                createdAt: new Date().toISOString()
            };

            currentUserData.students.push(student);
            
            currentUserData.counters[student.id] = {
                homework: { yes: 0, no: 0 },
                participation: { yes: 0, no: 0 },
                activity: { yes: 0, no: 0 }
            };

            autoSave();
            renderGroups();
            renderTrackingTable();
            hideAddStudentModal();
            Swal.fire({
                icon: 'success',
                title: 'ูุฌุงุญ',
                text: 'ุชู ุฅุถุงูุฉ ุงูุทุงูุจ ุจูุฌุงุญ',
                confirmButtonText: 'ุญุณูุงู'
            });
        }

        function deleteStudent(studentId) {
            Swal.fire({
                title: 'ูู ุฃูุช ูุชุฃูุฏุ',
                text: 'ูุง ูููู ุงูุชุฑุงุฌุน ุนู ูุฐู ุงูุนูููุฉ!',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'ูุนูุ ุงุญุฐู',
                cancelButtonText: 'ุฅูุบุงุก',
                confirmButtonColor: '#d33'
            }).then((result) => {
                if (result.isConfirmed) {
                    currentUserData.students = currentUserData.students.filter(s => s.id !== studentId);
                    delete currentUserData.counters[studentId];
                    autoSave();
                    renderGroups();
                    renderTrackingTable();
                    updateStatistics();
                    updateHallOfFame();
                    Swal.fire('ุชู ุงูุญุฐู', 'ุชู ุญุฐู ุงูุทุงูุจ ุจูุฌุงุญ', 'success');
                }
            });
        }

        // ุงููุชุงุจุนุฉ ุงูููููุฉ
        function renderTrackingTable() {
            const table = document.getElementById('trackingTable');
            const groupFilter = document.getElementById('trackingGroupFilter').value;
            
            let filteredStudents = currentUserData.students;

            // ุชุทุจูู ููุชุฑ ุงููุฌููุนุฉ
            if (groupFilter !== 'all') {
                filteredStudents = filteredStudents.filter(student => student.groupId === groupFilter);
            }

            table.innerHTML = '';

            if (filteredStudents.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="6" class="p-6 text-center text-gray-500">
                            <i class="fas fa-users text-3xl text-gray-300 mb-3"></i>
                            <p class="text-sm">ูุง ููุฌุฏ ุทูุงุจ ูููุชุงุจุนุฉ</p>
                            <button onclick="showAddStudentModal()" class="mt-2 bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-xs">
                                ุฅุถุงูุฉ ุทุงูุจ ุฌุฏูุฏ
                            </button>
                        </td>
                    </tr>
                `;
                return;
            }

            filteredStudents.forEach(student => {
                const group = currentUserData.groups.find(g => g.id === student.groupId);
                const counters = currentUserData.counters[student.id] || {
                    homework: { yes: 0, no: 0 },
                    participation: { yes: 0, no: 0 },
                    activity: { yes: 0, no: 0 }
                };

                const points = calculateStudentPoints(student.id);
                const totalYes = counters.homework.yes + counters.participation.yes + counters.activity.yes;
                const totalNo = counters.homework.no + counters.participation.no + counters.activity.no;
                const accuracy = totalYes + totalNo > 0 ? Math.round((totalYes / (totalYes + totalNo)) * 100) : 0;

                const row = document.createElement('tr');
                row.className = 'border-b border-gray-200 hover:bg-gray-50';
                row.setAttribute('data-student-id', student.id);
                row.innerHTML = `
                    <td class="p-3">
                        <div class="flex items-center space-x-2 space-x-reverse">
                            <div class="${student.color} student-avatar text-white text-sm">
                                ${student.name.charAt(0)}
                            </div>
                            <div>
                                <div class="font-semibold text-gray-800 text-sm">${student.name}</div>
                                <div class="text-gray-500 text-xs">${group?.name || 'ุจุฏูู ูุฌููุนุฉ'}</div>
                            </div>
                        </div>
                    </td>
                    <td class="p-3 text-center">
                        <div class="flex items-center justify-center space-x-1 space-x-reverse">
                            <button onclick="incrementCounter('${student.id}', 'homework', 'yes')" 
                                    class="counter-btn bg-green-500 hover:bg-green-600 text-white w-8 h-8 rounded-full flex items-center justify-center text-xs">
                                <i class="fas fa-check"></i>
                            </button>
                            <span class="font-bold mx-1 min-w-6 text-center homework-yes">${counters.homework.yes}</span>
                            <button onclick="incrementCounter('${student.id}', 'homework', 'no')" 
                                    class="counter-btn bg-red-500 hover:bg-red-600 text-white w-8 h-8 rounded-full flex items-center justify-center text-xs">
                                <i class="fas fa-times"></i>
                            </button>
                            <span class="font-bold text-red-600 mx-1 min-w-6 text-center homework-no">${counters.homework.no}</span>
                        </div>
                    </td>
                    <td class="p-3 text-center">
                        <div class="flex items-center justify-center space-x-1 space-x-reverse">
                            <button onclick="incrementCounter('${student.id}', 'participation', 'yes')" 
                                    class="counter-btn bg-green-500 hover:bg-green-600 text-white w-8 h-8 rounded-full flex items-center justify-center text-xs">
                                <i class="fas fa-check"></i>
                            </button>
                            <span class="font-bold mx-1 min-w-6 text-center participation-yes">${counters.participation.yes}</span>
                            <button onclick="incrementCounter('${student.id}', 'participation', 'no')" 
                                    class="counter-btn bg-red-500 hover:bg-red-600 text-white w-8 h-8 rounded-full flex items-center justify-center text-xs">
                                <i class="fas fa-times"></i>
                            </button>
                            <span class="font-bold text-red-600 mx-1 min-w-6 text-center participation-no">${counters.participation.no}</span>
                        </div>
                    </td>
                    <td class="p-3 text-center">
                        <div class="flex items-center justify-center space-x-1 space-x-reverse">
                            <button onclick="incrementCounter('${student.id}', 'activity', 'yes')" 
                                    class="counter-btn bg-green-500 hover:bg-green-600 text-white w-8 h-8 rounded-full flex items-center justify-center text-xs">
                                <i class="fas fa-check"></i>
                            </button>
                            <span class="font-bold mx-1 min-w-6 text-center activity-yes">${counters.activity.yes}</span>
                            <button onclick="incrementCounter('${student.id}', 'activity', 'no')" 
                                    class="counter-btn bg-red-500 hover:bg-red-600 text-white w-8 h-8 rounded-full flex items-center justify-center text-xs">
                                <i class="fas fa-times"></i>
                            </button>
                            <span class="font-bold text-red-600 mx-1 min-w-6 text-center activity-no">${counters.activity.no}</span>
                        </div>
                    </td>
                    <td class="p-3 text-center">
                        <span class="font-bold text-lg ${
                            points >= 10 ? 'text-green-600' : points >= 5 ? 'text-yellow-600' : 'text-red-600'
                        } student-points">
                            ${points}
                        </span>
                    </td>
                    <td class="p-3 text-center">
                        <span class="${getPerformanceBadge(student.id)} text-xs student-performance">
                            ${getPerformanceLevel(student.id)}
                        </span>
                        <div class="text-gray-500 text-xs mt-1">${accuracy}%</div>
                    </td>
                `;
                table.appendChild(row);
            });
        }

        function incrementCounter(studentId, type, action) {
            if (!currentUserData.counters[studentId]) {
                currentUserData.counters[studentId] = {
                    homework: { yes: 0, no: 0 },
                    participation: { yes: 0, no: 0 },
                    activity: { yes: 0, no: 0 }
                };
            }

            currentUserData.counters[studentId][type][action]++;
            autoSave();
            
            // ุชุญุฏูุซ ุงูุตู ูุจุงุดุฑุฉ
            updateStudentRow(studentId);
            updateStatistics();
            updateHallOfFame();
        }

        // ุชุญุฏูุซ ุตู ุงูุทุงูุจ ููุท
        function updateStudentRow(studentId) {
            const student = currentUserData.students.find(s => s.id === studentId);
            if (!student) return;

            const counters = currentUserData.counters[studentId];
            const points = calculateStudentPoints(studentId);
            const totalYes = counters.homework.yes + counters.participation.yes + counters.activity.yes;
            const totalNo = counters.homework.no + counters.participation.no + counters.activity.no;
            const accuracy = totalYes + totalNo > 0 ? Math.round((totalYes / (totalYes + totalNo)) * 100) : 0;

            // ุชุญุฏูุซ ุงูุนูุงุตุฑ ูู ุงูุฌุฏูู
            const row = document.querySelector(`[data-student-id="${studentId}"]`);
            if (row) {
                // ุชุญุฏูุซ ุงูุนุฏุงุฏุงุช
                row.querySelector('.homework-yes').textContent = counters.homework.yes;
                row.querySelector('.homework-no').textContent = counters.homework.no;
                row.querySelector('.participation-yes').textContent = counters.participation.yes;
                row.querySelector('.participation-no').textContent = counters.participation.no;
                row.querySelector('.activity-yes').textContent = counters.activity.yes;
                row.querySelector('.activity-no').textContent = counters.activity.no;

                // ุชุญุฏูุซ ุงูููุงุท
                const pointsElement = row.querySelector('.student-points');
                pointsElement.textContent = points;
                pointsElement.className = `font-bold text-lg ${
                    points >= 10 ? 'text-green-600' : points >= 5 ? 'text-yellow-600' : 'text-red-600'
                } student-points`;

                // ุชุญุฏูุซ ุงูุชูููู
                const performanceElement = row.querySelector('.student-performance');
                performanceElement.className = `${getPerformanceBadge(studentId)} text-xs student-performance`;
                performanceElement.textContent = getPerformanceLevel(studentId);
            }
        }

        function calculateStudentPoints(studentId) {
            const counters = currentUserData.counters[studentId];
            if (!counters) return 0;

            const homeworkPoints = counters.homework.yes * currentUserData.userSettings.homeworkWeight;
            const participationPoints = counters.participation.yes * currentUserData.userSettings.participationWeight;
            const activityPoints = counters.activity.yes * currentUserData.userSettings.activityWeight;

            return homeworkPoints + participationPoints + activityPoints;
        }

        // ูุธุงู ุงูุชูููู
        function getPerformanceLevel(studentId) {
            const points = calculateStudentPoints(studentId);
            if (points >= 15) return 'ููุชุงุฒ';
            if (points >= 10) return 'ุฌูุฏ ุฌุฏุงู';
            if (points >= 5) return 'ุฌูุฏ';
            return 'ุถุนูู';
        }

        function getPerformanceBadge(studentId) {
            const points = calculateStudentPoints(studentId);
            if (points >= 15) return 'performance-badge performance-excellent';
            if (points >= 10) return 'performance-badge performance-good';
            if (points >= 5) return 'performance-badge performance-average';
            return 'performance-badge performance-weak';
        }

        // ุงูุฅุญุตุงุฆูุงุช
        function updateStatistics() {
            document.getElementById('totalStudents').textContent = currentUserData.students.length;
            document.getElementById('totalGroups').textContent = currentUserData.groups.length;
            
            if (currentUserData.students.length > 0) {
                const points = currentUserData.students.map(s => calculateStudentPoints(s.id));
                const totalPoints = points.reduce((sum, point) => sum + point, 0);
                const averagePoints = Math.round(totalPoints / currentUserData.students.length);
                const highestPoints = Math.max(...points);
                
                document.getElementById('averagePoints').textContent = averagePoints;
                document.getElementById('highestPoints').textContent = highestPoints;
            } else {
                document.getElementById('averagePoints').textContent = '0';
                document.getElementById('highestPoints').textContent = '0';
            }
        }

        // ูุงุนุฉ ุงูุดุฑู
        function updateHallOfFame() {
            const studentsWithPoints = currentUserData.students.map(student => {
                const counters = currentUserData.counters[student.id] || {
                    homework: { yes: 0, no: 0 },
                    participation: { yes: 0, no: 0 },
                    activity: { yes: 0, no: 0 }
                };
                
                const totalYes = counters.homework.yes + counters.participation.yes + counters.activity.yes;
                const totalNo = counters.homework.no + counters.participation.no + counters.activity.no;
                const accuracy = totalYes + totalNo > 0 ? Math.round((totalYes / (totalYes + totalNo)) * 100) : 0;

                return {
                    ...student,
                    points: calculateStudentPoints(student.id),
                    group: currentUserData.groups.find(g => g.id === student.groupId)?.name || 'ุจุฏูู ูุฌููุนุฉ',
                    totalYes: totalYes,
                    totalNo: totalNo,
                    accuracy: accuracy
                };
            });

            studentsWithPoints.sort((a, b) => {
                if (b.points !== a.points) return b.points - a.points;
                return b.accuracy - a.accuracy;
            });

            // ุงููุฑุงูุฒ ุงูุฃููู
            if (studentsWithPoints.length > 0) {
                document.getElementById('firstPlace').textContent = studentsWithPoints[0].name;
                document.getElementById('firstPoints').textContent = `${studentsWithPoints[0].points} ููุทุฉ`;
                document.getElementById('firstGroup').textContent = studentsWithPoints[0].group;
            }
            if (studentsWithPoints.length > 1) {
                document.getElementById('secondPlace').textContent = studentsWithPoints[1].name;
                document.getElementById('secondPoints').textContent = `${studentsWithPoints[1].points} ููุทุฉ`;
                document.getElementById('secondGroup').textContent = studentsWithPoints[1].group;
            }
            if (studentsWithPoints.length > 2) {
                document.getElementById('thirdPlace').textContent = studentsWithPoints[2].name;
                document.getElementById('thirdPoints').textContent = `${studentsWithPoints[2].points} ููุทุฉ`;
                document.getElementById('thirdGroup').textContent = studentsWithPoints[2].group;
            }

            // ุฌุฏูู ุงูุชุตููู
            const table = document.getElementById('rankingTable');
            table.innerHTML = '';

            studentsWithPoints.forEach((student, index) => {
                const row = document.createElement('tr');
                row.className = 'border-b border-gray-200 hover:bg-gray-50';
                row.innerHTML = `
                    <td class="p-3 text-center">
                        <span class="font-bold ${
                            index === 0 ? 'text-yellow-600' : 
                            index === 1 ? 'text-gray-600' : 
                            index === 2 ? 'text-orange-600' : 'text-gray-500'
                        } text-sm">
                            ${index + 1}
                        </span>
                    </td>
                    <td class="p-3">
                        <div class="flex items-center space-x-2 space-x-reverse">
                            <div class="${student.color} student-avatar text-white text-sm">
                                ${student.name.charAt(0)}
                            </div>
                            <span class="font-medium text-sm">${student.name}</span>
                        </div>
                    </td>
                    <td class="p-3">
                        <span class="bg-gray-100 text-gray-800 px-2 py-1 rounded text-xs">
                            ${student.group}
                        </span>
                    </td>
                    <td class="p-3 text-center font-bold text-sm">${student.points}</td>
                    <td class="p-3 text-center text-green-600 font-bold text-sm">${student.totalYes}</td>
                    <td class="p-3 text-center text-red-600 font-bold text-sm">${student.totalNo}</td>
                    <td class="p-3 text-center font-bold ${
                        student.accuracy >= 80 ? 'text-green-600' : 
                        student.accuracy >= 60 ? 'text-yellow-600' : 'text-red-600'
                    } text-sm">
                        ${student.accuracy}%
                    </td>
                `;
                table.appendChild(row);
            });
        }

        // ุฅุนุฏุงุฏุงุช ุงููุธูุฑ
        function changeTheme(theme) {
            appData.settings.theme = theme;
            autoSave();
            applyTheme();
        }

        function applyTheme() {
            document.body.className = `theme-${appData.settings.theme} ${appData.settings.darkMode ? 'dark-mode' : 'light-mode'} bg-gray-50 min-h-screen`;
        }

        function toggleDarkMode() {
            appData.settings.darkMode = !appData.settings.darkMode;
            document.getElementById('darkModeToggle').checked = appData.settings.darkMode;
            autoSave();
            applyTheme();
        }

        // ุงูุฅุนุฏุงุฏุงุช
        function saveWeights() {
            currentUserData.userSettings.homeworkWeight = parseInt(document.getElementById('homeworkWeight').value) || 1;
            currentUserData.userSettings.participationWeight = parseInt(document.getElementById('participationWeight').value) || 1;
            currentUserData.userSettings.activityWeight = parseInt(document.getElementById('activityWeight').value) || 1;
            
            autoSave();
            renderTrackingTable();
            updateHallOfFame();
            Swal.fire({
                icon: 'success',
                title: 'ูุฌุงุญ',
                text: 'ุชู ุญูุธ ุงูุฃูุฒุงู ุจูุฌุงุญ',
                confirmButtonText: 'ุญุณูุงู'
            });
        }

        // ุฃุฏูุงุช ุงูุจูุงูุงุช
        function exportToExcel() {
            if (currentUserData.students.length === 0) {
                Swal.fire({
                    icon: 'warning',
                    title: 'ุชุญุฐูุฑ',
                    text: 'ูุง ุชูุฌุฏ ุจูุงูุงุช ููุชุตุฏูุฑ',
                    confirmButtonText: 'ุญุณูุงู'
                });
                return;
            }

            const data = currentUserData.students.map(student => {
                const group = currentUserData.groups.find(g => g.id === student.groupId);
                const counters = currentUserData.counters[student.id] || { homework: { yes: 0, no: 0 }, participation: { yes: 0, no: 0 }, activity: { yes: 0, no: 0 } };
                const points = calculateStudentPoints(student.id);
                const totalYes = counters.homework.yes + counters.participation.yes + counters.activity.yes;
                const totalNo = counters.homework.no + counters.participation.no + counters.activity.no;
                const accuracy = totalYes + totalNo > 0 ? Math.round((totalYes / (totalYes + totalNo)) * 100) : 0;
                
                return {
                    'ุงุณู ุงูุทุงูุจ': student.name,
                    'ุงููุฌููุนุฉ': group?.name || 'ุจุฏูู ูุฌููุนุฉ',
                    'ุงููุงุฌุจุงุช (โ)': counters.homework.yes,
                    'ุงููุงุฌุจุงุช (โ)': counters.homework.no,
                    'ุงููุดุงุฑูุฉ (โ)': counters.participation.yes,
                    'ุงููุดุงุฑูุฉ (โ)': counters.participation.no,
                    'ุงููุดุงุท (โ)': counters.activity.yes,
                    'ุงููุดุงุท (โ)': counters.activity.no,
                    'ุฅุฌูุงูู (โ)': totalYes,
                    'ุฅุฌูุงูู (โ)': totalNo,
                    'ุงูููุงุท ุงูุฅุฌูุงููุฉ': points,
                    'ูุณุจุฉ ุงูุฏูุฉ': accuracy + '%',
                    'ุงูุชูููู': getPerformanceLevel(student.id)
                };
            });

            const ws = XLSX.utils.json_to_sheet(data);
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, 'ุงูุทูุงุจ');
            XLSX.writeFile(wb, 'ุชูุฑูุฑ_ุงูุทูุงุจ.xlsx');
        }

        function exportToPDF() {
            if (currentUserData.students.length === 0) {
                Swal.fire({
                    icon: 'warning',
                    title: 'ุชุญุฐูุฑ',
                    text: 'ูุง ุชูุฌุฏ ุจูุงูุงุช ููุชุตุฏูุฑ',
                    confirmButtonText: 'ุญุณูุงู'
                });
                return;
            }

            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            doc.setFont('helvetica');
            doc.setFontSize(16);
            doc.text('ุชูุฑูุฑ ุฃุฏุงุก ุงูุทูุงุจ', 105, 15, { align: 'center' });
            
            doc.setFontSize(10);
            doc.text(`ุชุงุฑูุฎ ุงูุชุตุฏูุฑ: ${new Date().toLocaleDateString('ar-SA')}`, 105, 22, { align: 'center' });
            
            let y = 35;
            doc.setFontSize(8);
            
            const studentsWithPoints = currentUserData.students.map(student => ({
                ...student,
                points: calculateStudentPoints(student.id),
                group: currentUserData.groups.find(g => g.id === student.groupId)?.name || 'ุจุฏูู ูุฌููุนุฉ',
                counters: currentUserData.counters[student.id] || { homework: { yes: 0, no: 0 }, participation: { yes: 0, no: 0 }, activity: { yes: 0, no: 0 } }
            })).sort((a, b) => b.points - a.points);

            studentsWithPoints.forEach((student, index) => {
                if (y > 270) {
                    doc.addPage();
                    y = 20;
                }
                
                const totalYes = student.counters.homework.yes + student.counters.participation.yes + student.counters.activity.yes;
                const totalNo = student.counters.homework.no + student.counters.participation.no + student.counters.activity.no;
                
                doc.text(`${index + 1}. ${student.name} - ${student.group}`, 15, y);
                doc.text(`ุงูููุงุท: ${student.points} | โ: ${totalYes} | โ: ${totalNo}`, 15, y + 5);
                y += 12;
            });
            
            doc.save('ุชูุฑูุฑ_ุงูุทูุงุจ.pdf');
            Swal.fire({
                icon: 'success',
                title: 'ูุฌุงุญ',
                text: 'ุชู ุชุตุฏูุฑ ุงูููู PDF ุจูุฌุงุญ',
                confirmButtonText: 'ุญุณูุงู'
            });
        }

        function importFromExcel() {
            Swal.fire({
                icon: 'info',
                title: 'ููุฏ ุงูุชุทููุฑ',
                text: 'ุฎุงุตูุฉ ุงูุงุณุชูุฑุงุฏ ูู Excel ููุฏ ุงูุชุทููุฑ',
                confirmButtonText: 'ุญุณูุงู'
            });
        }

        function backupData() {
            const dataStr = JSON.stringify(appData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `ูุณุฎุฉ_ุงุญุชูุงุทูุฉ_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            URL.revokeObjectURL(url);
            Swal.fire({
                icon: 'success',
                title: 'ูุฌุงุญ',
                text: 'ุชู ุฅูุดุงุก ูุณุฎุฉ ุงุญุชูุงุทูุฉ',
                confirmButtonText: 'ุญุณูุงู'
            });
        }

        function resetData() {
            Swal.fire({
                title: 'ูุณุญ ุฌููุน ุงูุจูุงูุงุช',
                text: 'ูุฐุง ุงูุฅุฌุฑุงุก ูุง ูููู ุงูุชุฑุงุฌุน ุนูู! ุฃุฏุฎู ูููุฉ "ุชุฃููุฏ" ูููุชุงุจุนุฉ:',
                input: 'text',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'ูุณุญ ุงููู',
                cancelButtonText: 'ุฅูุบุงุก',
                confirmButtonColor: '#d33',
                inputValidator: (value) => {
                    if (value !== 'ุชุฃููุฏ') {
                        return 'ูุฌุจ ูุชุงุจุฉ ูููุฉ "ุชุฃููุฏ" ูููุชุงุจุนุฉ!';
                    }
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    currentUserData = {
                        groups: [],
                        students: [],
                        counters: {},
                        userSettings: {
                            homeworkWeight: 1,
                            participationWeight: 1,
                            activityWeight: 1
                        }
                    };
                    autoSave();
                    renderGroups();
                    renderTrackingTable();
                    updateStatistics();
                    updateHallOfFame();
                    Swal.fire('ุชู ุงููุณุญ', 'ุชู ูุณุญ ุฌููุน ุงูุจูุงูุงุช', 'success');
                }
            });
        }
    </script>
</body>
</html>